@(v: Vehicle)
@import helper._
@main("editVehicle") {
@_menuBars()
<div class="col-sm-9 col-sm-offset-3 col-md-10 col-md-offset-2 main">
   <div class="main">
      <div class="content">
         <div class="section group">
            <div class="col span_2_of_3">
               <div style="width:200px" class="contact-form">
                  <form id="form1" name="newVehicleForm" action="@routes.VehicleController.editVehicle(v.id)" method="POST" enctype="multipart/form-data">
                     <div style="float:left">
                        <h5 id="editProfileText">Vehicle ID *</h5>
                        <input class="form-control" pattern=".{3,30}" required title="@Messages(" one up to fifty character ")" type="text" value="@v.vid" id="vid" name="vid" required/>
                        <h5 id="editProfileText">Name *</h5>
                        <input class="form-control" pattern=".{3,140}" required title="@Messages(" one up to fifty characters ")" type="text" value="@v.name" id="name" name="name" required/>
                        <h5 id="editProfileText">Owner *</h5>
                        <input class="form-control" pattern=".{3,140}" required title="@Messages(" one up to fifty characters ")" type="text" value="@v.owner.name" id="ownerName" name="ownerName" required/>
                        <h5 id="editProfileText">Type *</h5>
                        <select name="typeName" class="form-control" id="typeName" style="margin-left: 57px; width: 153px;" required>
                           @if(v.typev != null){
                           <option select="selected" style="display:none"> @v.typev.name </option>
                           }else{
                           <option style="display:none">Select Type</option>
                           } @for(t <- Type.typesList()) { 
                           <option>@t.name</option>
                           }
                           <option>New Type</option>
                        </select>
                        <input style="display:none" id="newType" class="form-control" type="text" name="newType" class="dimension" placeholder="Type name">
                        </br>
                        <h5 id="editProfileText">Fleet *</h5>
                        <select class="form-control" id="fleetName" name="fleetName">
                           @if(Fleet.listOfFleets() == null) {
                           <option value="">List of fleets is empty</option>
                           } @if(v.fleet == null || v.fleet.name.isEmpty()) {
                           <option value="" style="display:none">Select Fleet</option>
                           @for(fleet <- Fleet.listOfFleets()) { 
                           <option value="@fleet.name">@fleet.name</option>
                           }
                           } 
                           @if(v.fleet != null) {
                           <option select="selected" style="display:none">@v.fleet.name</option>
                           @for(fleet <- Fleet.listOfFleets()) {
                           <option value="@fleet.name">@fleet.name</option>
                           } 
                           }
                        </select>
                        </br>
                        <a class="btn btn-primary btn-odmak btn-fontNovi" onclick="myFunction()">Save  <b class="glyphicon glyphicon-floppy-save"></b></a>
                        <a href="@routes.VehicleController.showVehicle(v.id)" class="btn btn-primary">More Options  <b class="glyphicon glyphicon-wrench"></b></a>
                     </div>
                     <div id="openModal-@(v.id)" class="modalDialog">
                        <div>
                           <a href="#close" title="Close" class="close">X</a>
                           <label>
                              <h4> Vehicle ID
                           </label>
                           @v.vid </h4>
                           </br>
                           <label>
                              <h4>
                                 Owner
                           </label>
                           </br>
                           <h5>Name:  @v.owner.name </h5></br>
                           <h5> Email: @v.owner.email</h5></h4>
                           </br>
                           <label>
                              <h4> Type  @v.typev.name </h4>
                           </label>
                           </br>
                           @if(v.fleet != null) {
                           <label>
                              <h4> Fleet @v.fleet.name </h4>
                           </label>
                           </br>
                           }
                           <label>
                              <h4> Description </h4>
                           </label>
                           </br>
                           @for(d <- v.description) { 
                           <label style="display:inline;float:left;width:200px">@d.propertyName</label>
                           <label style="display:inline;float:left;width:200px"> @d.propertyValue</label>
                           }
                           <a href="@routes.VehicleController.showVehicle(v.id)" class="btn btn-primary">More Options  <b class="glyphicon glyphicon-wrench"></b></a>
                        </div>
                     </div>
                     <div class="container">
                        <ul style="float:left;margin-left:100px" class="nav nav-tabs">
                           <li><a data-toggle="tab" href="#home">Description</a>
                           </li>
                         @if(v.typev.name=="Truck" || v.typev.name=="truck" || v.typev.name=="car" || v.typev.name=="Car"  ){
                           
                           <li><a data-toggle="tab" href="#menu2">Technical Info</a>
                           </li>
                           <li><a data-toggle="tab" href="#menu3">Registration</a>
                           </li>
                           <li><a data-toggle="tab" href="#menu4">Warranty</a>
                           </li>
                           <li><a href="#openModal-@(v.id)">See Details</a>
                           </li>
                           }
                        </ul>
                        <div style="float:left;margin-left:100px" class="tab-content">
                           <div id="home" class="tab-pane fade in active">
                              <h3>Description</h3>
                              @for(d <- v.description) { 
                              <label style="display:inline;float:left;width:200px">@d.propertyName</label>
                              <input style="width:200px" id="imePropertija" name="@d.propertyName" class="form-control" placeholder="@d.propertyValue"/>
                              </br>
                              }
                              <div class="control-group" id="fields">
                                 <div class="controls" id="profs">
                                    <input type="hidden" id="count" name="counter" value="0" />
                                    <div id="field">
                                       <div>
                                          <input style="display:inline;width:300px" autocomplete="off" class="form-control" id="propertyName0" name="propertyName0" type="text" placeholder="New Property" data-items="8" />
                                          <input style="display:inline;width:300px" autocomplete="off" class="form-control" id="propertyValue0" name="propertyValue0" type="text" placeholder="New Property Value" data-items="8" />
                                          <button style="display:inline" id="b1" class="btn add-more" type="button">+</button>
                                          </br>
                                       </div>
                                    </div>
                                    <small>Press + to add another form field </small>
                                 </div>
                              </div>
                           </div>
                           @if(v.typev.name=="Truck" || v.typev.name=="truck" || v.typev.name=="car" || v.typev.name=="Car"  ){
                           <div id="menu2" class="tab-pane fade">
                              @_technicalInfo(v)
                           </div>
                           <div id="menu3" class="tab-pane fade">
                              @_vehicleRegistration(v)
                           </div>
                           <div id="menu4" class="tab-pane fade">
                              @_vehicleWarranty(v)
                           </div>
                           }
                        </div>
                     </div>
                  </form>
               </div>
            </div>
         </div>
      </div>
   </div>
</div>
<script>
   $(document).ready(function(){
       var next = 1;
       $(".add-more").click(function(e){
           e.preventDefault();
           
   	    var innerHtml = '<div><input style="display:inline;width:300px" autocomplete="off" class="input form-control" id="propertyName' + next + '" name="propertyName' + next + '" type="text" placeholder="New Property" />&nbsp;';
   	   	innerHtml += '<input style="display:inline;width:300px" autocomplete="off" class="input form-control" id="propertyValue' + next + '" name="propertyValue' + next + '" type="text" placeholder="New Property Value" />&nbsp;';
   	   	innerHtml += '<button style="display:inline" id="remove' + (next - 1) + '" class="btn btn-danger remove-me" >-</button></br></div>';
           
           $('#field').append(innerHtml);
   
          $("#count").val(next);
           next++;
               $('.remove-me').click(function(e){
                   e.preventDefault();
                  $(e.target.parentElement).remove();
               });
       });   
   });
</script>
<script>
   function myFunction() {
       document.getElementById("form1").submit();
   }
</script>
<script>
   $(document).ready(function() {
   	$('#typeName').change(function(e) {
   		if ($('#typeName option:selected').text() === 'New Type')
   			$('#newType').show();
   		else
   			$('#newType').hide();
   	})
   });
</script>
}