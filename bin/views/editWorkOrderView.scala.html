@(wo: WorkOrder)(drivers: List[Driver])(vehicles: List[Vehicle])
@import helper._
@main("editWorkOrder") {
		
@_menuBars()
<div class="col-sm-9 col-sm-offset-3 col-md-10 col-md-offset-2 main">
    <div class="main">
        <h2 class="page-header">EDIT WORK ORDER</h2>
        <div class="content">
            <div class="section group">
                <div class="col span_2_of_3">
                    <div style="width:200px" class="contact-form">

                        <form id="form1" name="travelOrderForm" action="@routes.WorkOrderController.editWorkOrder(wo.id)" method="POST" enctype="multipart/form-data" novalidate>

                            <label>Choose a client:</label>
                            @if(Client.listOfClients().size()>0){
                            <select name="clName" class="form-control" id="clName">
                                @if(wo.client != null){
                                <option select="selected" style="display:none" value="@wo.client.cName">@wo.client.cName</option>
                                }else{
                                <option style="display:none">Choose Client</option>
                                } @for(client
                                <- Client.listOfClients()) { <option value="@client.cName">@client.cName</option>
                                    }
                            </select>
                            }
                            </br>

                            <label>Choose a vehicle:</label>
                            @if(vehicles.size()>0){
                            <select name="vehicleName" class="form-control" id="vehicleName">
                                @if(wo.vehicle != null){
                                <option select="selected" style="display:none" value="@wo.vehicle.name">@wo.vehicle.name @wo.vehicle.typev.name</option>
                                }else{
                                <option style="display:none">Choose Vehicle</option>
                                } @for(vehicle <- vehicles) { 
                                <option value="@vehicle.name">@vehicle.name @vehicle.typev.name</option>
                                    }
                            </select>
                            }
                            </br>

                            <label>Choose a driver:</label>
                            @if(drivers.size()>0){
                            <select name="driverName" class="form-control" id="driverName">
                                @if(wo.driver != null){
                                <option select="selected" style="display:none"> @wo.driver.driverName </option>
                                }else{
                                <option style="display:none">Choose Driver</option>
                                } @for(driver <- drivers) { 
                                <option>@driver.driverName</option>
                                  	}
                            </select>
                            }
                            </br>
                            <h5 id="editProfileText">Work Order Number *</h5>
                            <label>Work order NO: @wo.woNumber</label>

                            <h5 id="editProfileText">Description *</h5>
                            <input class="form-control" type="text" value="@wo.description" id="description" name="description" required/>
                            <br>
                            <br>
                            <select class="form-control" value='' id="statusWo" name="statusWo" required>
                                <option style="display:none" value="@wo.statusWo" select="selected">@wo.statusWo</option>
                                <option value="Open">Open</option>
                                <option value="Closed">Closed</option>
                                <option value="Complete">Complete</option>
                            </select>
                            </br>
                            <div class="row" style="width:900px">
                                <div class="col-lg-12">
                                    <table class="table" id="myTable">
                                        <thead>
                                            <tr>
                                                <th class="sorting">Task Name <b class="caret"></b>
                                                </th>
                                                <th class="sorting">Date <b class="caret"></b>
                                                </th>
                                                <th class="sorting">Description <b class="caret"></b>
                                                </th>
                                                <th class="sorting">Work Order <b class="caret"></b>
                                                </th>
                                                <th>Details</th>
                                                <th>Edit</th>
                                                <th>Delete</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            @for(task <- wo.tasks) { 
                                            <tr>
                                                <td>@task.name</td>
                                                <td>@task.dateTime</td>
                                                <td>@task.description</td>
                                                <td>Work Order NO@task.workOrder.woNumber</td>
                                                <td><a class="btn btn-info" data-toggle="modal" data-target="#myModal-@(task.id)"><b class="glyphicon glyphicon-search"></b></a> </td>
                                                <td> <a href="@routes.TaskController.editTaskView(task.id)" class="btn btn-default"><b class="glyphicon glyphicon-pencil"></b></a>
                                                </td>
                                                <td> <a href="@routes.TaskController.removeFromWorkOrder(task.id)" class="btn btn-danger"><b class="glyphicon glyphicon-trash"></b></a>
                                                </td>
                                            </tr>
                                                <!-- Modal -->
                                                <div id="myModal-@(task.id)" class="modal fade" role="dialog">
                                                    <div class="modal-dialog">
                                                        <!-- Modal content-->
                                                        <div class="modal-content">
                                                            <div class="modal-header">
                                                                <button type="button" class="close" data-dismiss="modal">&times;</button>
                                                                <h4 class="modal-title"> @task.name details</h4>
                                                            </div>
                                                            <div class="modal-body">
                                                                <label>
                                                                    <h4> Task Name: </h4>
                                                                </label> @task.name </br>
                                                                <label>
                                                                    <h4> Date: </h4>
                                                                </label> @task.dateTime</br>
                                                                <label>
                                                                    <h4> Work Order:  Work Order NO @task.workOrder.woNumber </h4>
                                                                </label>
                                                                </br>
                                                                <label>
                                                                    <h4> Description @task.description</h4>
                                                                </label>
                                                                </br>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                                }
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                            </br>
                            <div>
                                <a class="btn btn-primary btn-odmak btn-fontNovi" onClick="myFunction()">Save  <b class="glyphicon glyphicon-floppy-save"></b></a>
                                <button type="button" class="btn btn-danger" onclick="window.location.href='/'">Cancel</button>
                                <button type="button" id="addVehicles" class="btn btn-info">Add Task</button>
                            </div>
                        </form>
                        <div id="addVehicleDiv" style="display:none;">

                            <form action="@routes.WorkOrderController.addTasks(wo.id)" method="POST">
                                <h5 id="editProfileText">Tasks *</h5> 
                                @for(t <- Task.tasksList()) { 
                                	@if(!wo.tasks.contains(t)) { 
                               		 <input type="checkbox" name="vehicleID" value="@t.name"/>@t.name</br>
                               		}
                                }
                                <textarea style="display:none" textarea id="t" name="t"></textarea>

                                <input class="btn btn-primary btn-odmak btn-fontNovi" type="submit" value="Add" />
                                <button type="button" class="btn btn-danger" onclick="window.location.href='@routes.WorkOrderController.editWorkOrderView(wo.id)'">Cancel</button>

                            </form>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<script>
$(document).ready(function() {
	$('#buttonZaVozilo').click(function(e) {
			$('#divZaVozilo').show();
	})
});
</script>
<script>
$(document).ready(function() {
	$('#addVehicles').click(function(e) {
			$('#addVehicleDiv').show();
			$('#addVehicles').hide();
	})
});
</script>
<script>							
function updateTextArea() {         
     var allVals = [];
     $('#addVehicleDiv :checked').each(function() {
       allVals.push($(this).val());
     });
     $('#t').val(allVals);
  }
 $(function() {
   $('#addVehicleDiv input').click(updateTextArea);
   updateTextArea();
 });	
 </script>
 <script type="text/javascript">
    $(document).ready(function(){
        $('#myTable').DataTable();
    });
         </script>
         <script>
function myFunction() {
    document.getElementById("form1").submit();
}
</script>
}